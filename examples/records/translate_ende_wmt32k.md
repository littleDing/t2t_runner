## 2019-05-17-RTX2080TiX2-transformer_big_single_gpu
running with RTX2080TiX2
speed at training : INFO:tensorflow:loss = 6.1338243, step = 1000 (59.497 sec) 
BLEU_uncased =  26.55
BLEU_cased =  26.04

```
t2t-trainer \
    --generate_data \
    --problem=translate_ende_wmt32k \
    --tmp_dir=translate_ende_wmt32k/tmp \
    --data_dir=translate_ende_wmt32k/data \
    --output_dir=translate_ende_wmt32k/model \
    --model=transformer \
    --hparams_set=transformer_big_single_gpu \
    --worker_gpu_memory_fraction=0.9 \
    --worker_gpu=2 \
    --local_eval_frequency=10000 \
    --eval_steps=100000 
```

```
    global_step      loss  accuracy  accuracy_per_sequence  accuracy_top5  approx_bleu_score  neg_log_perplexity  rouge_2_fscore  rouge_L_fscore      train_begin_ts  train_dt  eval_dt  steps  steps/hour  tot_hour
0         10000  2.893219  0.512077               0.011589       0.715740           0.202677           -2.839537        0.270380        0.475414 2019-05-16 23:16:40     99.80     0.45  10000        6012      1.67
1         20000  2.281516  0.585798               0.013576       0.781736           0.269627           -2.264661        0.342550        0.539616 2019-05-17 00:56:55     98.95     0.43  10000        6063      3.33
2         30000  2.031247  0.620731               0.015563       0.812105           0.304210           -2.017704        0.379921        0.570664 2019-05-17 02:36:18     98.95     0.43  10000        6063      4.98
3         40000  1.892361  0.637926               0.015894       0.826611           0.321802           -1.889170        0.397354        0.585617 2019-05-17 04:15:41     98.95     0.43  10000        6063      6.64
4         50000  1.822261  0.648858               0.018874       0.834737           0.335386           -1.817234        0.411742        0.595750 2019-05-17 05:55:04     98.93     0.43  10000        6064      8.30
5         60000  1.779247  0.654849               0.016887       0.841565           0.340500           -1.770606        0.416006        0.598814 2019-05-17 07:34:26     98.95     0.43  10000        6063      9.95
6         70000  1.737413  0.659980               0.019205       0.846931           0.348149           -1.731828        0.422910        0.604498 2019-05-17 09:13:49     98.95     0.43  10000        6063     11.61
7         80000  1.697477  0.664273               0.019536       0.850693           0.353438           -1.695208        0.428347        0.608803 2019-05-17 10:53:12     99.00     0.43  10000        6060     13.27
8         90000  1.679942  0.668648               0.018874       0.853477           0.357113           -1.674132        0.431212        0.612162 2019-05-17 12:32:38     98.98     0.43  10000        6061     14.92
9        100000  1.662245  0.671526               0.019205       0.855965           0.359325           -1.658352        0.435299        0.614570 2019-05-17 14:12:03     99.00     0.45  10000        6060     16.58
10       110000  1.641795  0.673047               0.018874       0.857923           0.359930           -1.641167        0.435015        0.614645 2019-05-17 15:51:30     99.00     0.43  10000        6060     18.24
11       120000  1.633777  0.675759               0.021854       0.858737           0.364795           -1.630847        0.439677        0.618191 2019-05-17 17:30:56     98.98     0.43  10000        6061     19.89
12       130000  1.617728  0.677151               0.019205       0.861544           0.366702           -1.616042        0.442477        0.620806 2019-05-17 19:10:21     99.00     0.45  10000        6060     21.55
13       140000  1.603621  0.679498               0.019868       0.862499           0.366415           -1.602667        0.442350        0.620416 2019-05-17 20:49:48     98.95     0.45  10000        6063     23.21
14       150000  1.589914  0.681008               0.019205       0.863077           0.371218           -1.592245        0.446393        0.622026 2019-05-17 22:29:12     98.95     0.45  10000        6063     24.86
15       160000  1.588546  0.680784               0.020861       0.864115           0.369906           -1.586874        0.444646        0.621969 2019-05-18 00:08:36     98.90     0.43  10000        6066     26.52
16       170000  1.581235  0.681621               0.019536       0.864185           0.371055           -1.580148        0.446676        0.623324 2019-05-18 01:47:56     98.97     0.43  10000        6062     28.18
17       180000  1.576563  0.682906               0.021523       0.866072           0.373918           -1.573809        0.448283        0.625456 2019-05-18 03:27:20     98.95     0.45  10000        6063     29.83
18       190000  1.570230  0.683614               0.019868       0.866803           0.372997           -1.567548        0.448131        0.624050 2019-05-18 05:06:44     98.95     0.43  10000        6063     31.49
19       200000  1.558612  0.684357               0.020861       0.867806           0.372952           -1.557199        0.447535        0.623917 2019-05-18 06:46:07     98.93     0.45  10000        6064     33.15
20       210000  1.558536  0.685654               0.019868       0.867853           0.375128           -1.557990        0.449933        0.627028 2019-05-18 08:25:30     98.95     0.43  10000        6063     34.80
21       220000  1.560778  0.685371               0.019205       0.868549           0.375532           -1.558682        0.450851        0.626651 2019-05-18 10:04:53     98.93     0.43  10000        6064     36.46
22       230000  1.547156  0.686739               0.020530       0.868950           0.377282           -1.546842        0.452237        0.627618 2019-05-18 11:44:15     98.88     0.43  10000        6067     38.11
23       240000  1.543908  0.687388               0.019536       0.869139           0.377603           -1.544857        0.452586        0.627463 2019-05-18 13:23:34     98.90     0.43  10000        6066     39.77
24       250000  1.540541  0.688567               0.022185       0.869905           0.381155           -1.539895        0.455550        0.629988 2019-05-18 15:02:54     98.90     0.43  10000        6066     41.42
25       250000  1.540541  0.688567               0.022185       0.869905           0.381155           -1.539895        0.455550        0.629988 2019-05-18 16:42:14      0.12     0.43      0           0     41.43
```


## 2019-05-16-M40X4-transformer_big_single_gpu
running with M40X4
speed at training : INFO:tensorflow:loss = 6.168968, step = 1000 (144.674 sec)

```
t2t-trainer \
  --data_dir=/data/ceph/weijieding/t2t_data/translate_ende_wmt32k/data  \
  --output_dir=/data/ceph/weijieding/t2t_job_translate_en_de  \
  --problem=translate_ende_wmt32k  \
  --model=transformer  \
  --hparams_set=transformer_big_single_gpu  \
  --worker_gpu=4 \
  --keep_checkpoint_max=10 \
  --local_eval_frequency=10000 \
  --eval_steps=100000
```
```
    global_step      loss  accuracy  accuracy_per_sequence  accuracy_top5  approx_bleu_score  neg_log_perplexity  rouge_2_fscore  rouge_L_fscore      train_begin_ts  train_dt  eval_dt  steps  steps/hour  tot_hour
0         10000  2.226390  0.595563               0.027124       0.788824           0.269108           -2.198757        0.341543        0.526697 2019-05-16 00:16:06    247.98     0.47  10000        2419      4.14
1         20000  1.836588  0.645084               0.030719       0.834961           0.317857           -1.827382        0.389439        0.566627 2019-05-16 04:24:33    242.25     0.45  10000        2476      8.19
2         30000  1.681292  0.667445               0.033007       0.852274           0.341603           -1.675679        0.414184        0.585544 2019-05-16 08:27:15    242.18     0.45  10000        2477     12.23
3         40000  1.606250  0.677988               0.033660       0.861473           0.352942           -1.600952        0.424675        0.593904 2019-05-16 12:29:53    242.42     0.43  10000        2475     16.28
4         50000  1.578555  0.681609               0.032026       0.865082           0.356426           -1.572083        0.428613        0.596734 2019-05-16 16:32:44    242.22     0.47  10000        2477     20.32
5         60000  1.541320  0.686893               0.032680       0.869575           0.363294           -1.537831        0.435600        0.601692 2019-05-16 20:35:25    242.30     0.43  10000        2476     24.37
6         70000  1.521262  0.688461               0.033007       0.872016           0.365126           -1.519927        0.436434        0.602932 2019-05-17 00:38:09    242.35     0.45  10000        2475     28.41
7         80000  1.511215  0.691539               0.035294       0.873927           0.368734           -1.507967        0.440400        0.604897 2019-05-17 04:40:57    242.12     0.43  10000        2478     32.46
8         90000  1.502682  0.693072               0.034641       0.874894           0.370815           -1.498568        0.442468        0.606924 2019-05-17 08:43:30    242.35     0.47  10000        2475     36.50
9        100000  1.495594  0.693544               0.037908       0.875837           0.372429           -1.493912        0.443884        0.608071 2019-05-17 12:46:19    242.40     0.45  10000        2475     40.55
10       110000  1.486785  0.695467               0.036601       0.876474           0.374967           -1.485421        0.446232        0.609829 2019-05-17 16:49:10    242.45     0.45  10000        2474     44.60
11       120000  1.481994  0.696221               0.035621       0.876934           0.372835           -1.481653        0.444875        0.609083 2019-05-17 20:52:04    242.32     0.45  10000        2476     48.65
12       130000  1.480292  0.696552               0.035621       0.877618           0.374383           -1.478844        0.445661        0.609459 2019-05-18 00:54:50    242.40     0.47  10000        2475     52.69
13       140000  1.480169  0.697460               0.036601       0.878444           0.377409           -1.475997        0.447301        0.610104 2019-05-18 04:57:42    242.50     0.47  10000        2474     56.74
14       150000  1.476029  0.697589               0.035621       0.878644           0.373647           -1.470737        0.445168        0.608850 2019-05-18 09:00:40    242.80     0.45  10000        2471     60.80
15       160000  1.474007  0.697931               0.034314       0.878597           0.376213           -1.471299        0.448017        0.611155 2019-05-18 13:03:55    242.72     0.45  10000        2471     64.85
16       170000  1.472753  0.697931               0.035621       0.879198           0.377179           -1.470107        0.447787        0.610917 2019-05-18 17:07:05    242.43     0.43  10000        2474     68.90
17       180000  1.471048  0.698462               0.036275       0.879930           0.376486           -1.465918        0.447440        0.610850 2019-05-18 21:09:57    242.42     0.47  10000        2475     72.95
18       190000  1.472444  0.699299               0.035621       0.879706           0.376647           -1.468178        0.448168        0.610941 2019-05-19 01:12:50    242.65     0.47  10000        2472     77.00
19       200000  1.464971  0.699618               0.036275       0.879847           0.376832           -1.461586        0.448399        0.611319 2019-05-19 05:15:57    242.57     0.43  10000        2473     81.05
20       210000  1.470292  0.698450               0.035948       0.879446           0.377634           -1.467428        0.449174        0.611757 2019-05-19 09:18:57    242.45     0.45  10000        2474     85.10
21       220000  1.476779  0.698816               0.034967       0.879045           0.377098           -1.473161        0.447782        0.610873 2019-05-19 13:21:51    242.43     0.45  10000        2474     89.14
22       230000  1.475397  0.699288               0.034967       0.879623           0.377625           -1.470007        0.448200        0.611284 2019-05-19 17:24:44    242.37     0.45  10000        2475     93.19
23       240000  1.479522  0.698898               0.034967       0.879033           0.376441           -1.474146        0.447400        0.610917 2019-05-19 21:27:33    242.47     0.47  10000        2474     97.24
24       250000  1.470404  0.699016               0.035948       0.879800           0.378202           -1.468380        0.449276        0.612309 2019-05-20 01:30:29    242.27     0.43  10000        2476    101.29
25       250000  1.470404  0.699016               0.035948       0.879800           0.378202           -1.468380        0.449276        0.612309 2019-05-20 05:33:11      0.35     0.45      0           0    101.30
```


## 2019-05-12-RTX2080TiX2-transformer_big
running with RTX2080TiX2
speed at training : INFO:tensorflow:loss = 5.7481885, step = 1000 (68.233 sec)

```
t2t-trainer \
    --generate_data \
    --problem=translate_ende_wmt32k \
    --tmp_dir=translate_ende_wmt32k/tmp \
    --data_dir=translate_ende_wmt32k/data \
    --output_dir=translate_ende_wmt32k/model \
    --model=transformer \
    --hparams_set=transformer_big \
    --worker_gpu_memory_fraction=0.9 \
    --worker_gpu=2 \
    --local_eval_frequency=10000 \
    --eval_steps=100000 
```
```
    global_step      loss  accuracy  accuracy_per_sequence  accuracy_top5  approx_bleu_score  neg_log_perplexity  rouge_2_fscore  rouge_L_fscore      train_begin_ts  train_dt  eval_dt  steps  steps/hour  tot_hour
0         10000  3.135921  0.475811               0.010265       0.679899           0.169768           -3.089434        0.237228        0.445853 2019-05-12 19:45:38    114.33     0.47  10000        5247      1.91
1         20000  2.573830  0.548814               0.011589       0.748490           0.231489           -2.519966        0.304524        0.503768 2019-05-12 21:40:26    113.45     0.45  10000        5288      3.81
2         30000  2.312953  0.582803               0.013907       0.777479           0.266497           -2.270319        0.340653        0.536396 2019-05-12 23:34:20    113.48     0.45  10000        5287      5.71
3         40000  2.167146  0.601071               0.014901       0.794108           0.283191           -2.133034        0.358019        0.551756 2019-05-13 01:28:16    113.45     0.45  10000        5288      7.61
4         50000  2.101915  0.613147               0.015894       0.803732           0.294986           -2.056614        0.369405        0.560338 2019-05-13 03:22:10    113.43     0.43  10000        5289      9.51
5         60000  2.044890  0.621285               0.017219       0.810525           0.301960           -2.001095        0.377452        0.567099 2019-05-13 05:16:02    113.30     0.45  10000        5295     11.40
6         70000  1.998230  0.627371               0.015563       0.816044           0.308910           -1.958554        0.383957        0.573158 2019-05-13 07:09:47    113.47     0.45  10000        5287     13.30
7         80000  1.951854  0.631899               0.017550       0.820431           0.314015           -1.920991        0.389157        0.577313 2019-05-13 09:03:42    113.50     0.45  10000        5286     15.20
8         90000  1.927707  0.635402               0.015563       0.823557           0.316467           -1.890214        0.391906        0.579056 2019-05-13 10:57:39    113.48     0.43  10000        5287     17.10
9        100000  1.898651  0.639707               0.016556       0.826057           0.324071           -1.867227        0.398739        0.584471 2019-05-13 12:51:34    113.55     0.43  10000        5284     19.00
10       110000  1.878129  0.641947               0.014901       0.828698           0.322481           -1.849590        0.398444        0.585773 2019-05-13 14:45:33    113.58     0.43  10000        5282     20.90
11       120000  1.864883  0.644530               0.016225       0.830373           0.328527           -1.835874        0.403637        0.588762 2019-05-13 16:39:34    113.58     0.43  10000        5282     22.80
12       130000  1.844415  0.646570               0.017881       0.833428           0.331886           -1.815250        0.405965        0.590234 2019-05-13 18:33:35    113.57     0.43  10000        5283     24.70
13       140000  1.824147  0.649566               0.016887       0.835374           0.334365           -1.796644        0.408561        0.592955 2019-05-13 20:27:35    113.55     0.43  10000        5284     26.60
14       150000  1.810193  0.651536               0.016225       0.837084           0.335919           -1.783681        0.410437        0.594945 2019-05-13 22:21:34    113.53     0.43  10000        5284     28.50
15       160000  1.799035  0.651889               0.016887       0.838122           0.337689           -1.774786        0.411822        0.595538 2019-05-14 00:15:32    113.48     0.43  10000        5287     30.40
16       170000  1.790623  0.653116               0.017219       0.839466           0.339544           -1.767156        0.413564        0.597377 2019-05-14 02:09:27    113.50     0.43  10000        5286     32.30
17       180000  1.784680  0.654378               0.017550       0.839690           0.338815           -1.761777        0.413718        0.598355 2019-05-14 04:03:23    113.47     0.43  10000        5287     34.19
18       190000  1.765356  0.656949               0.017881       0.841978           0.342157           -1.747500        0.417077        0.600985 2019-05-14 05:57:17    113.48     0.43  10000        5287     36.09
19       200000  1.767176  0.656666               0.016556       0.841200           0.341292           -1.749028        0.416504        0.599399 2019-05-14 07:51:12    113.50     0.43  10000        5286     37.99
20       210000  1.757216  0.657621               0.017881       0.843075           0.342287           -1.737801        0.417591        0.600545 2019-05-14 09:45:08    113.50     0.45  10000        5286     39.89
21       220000  1.745114  0.660770               0.019205       0.844266           0.347370           -1.725714        0.421912        0.603432 2019-05-14 11:39:05    113.48     0.45  10000        5287     41.79
22       230000  1.735103  0.660935               0.017550       0.846059           0.345067           -1.716074        0.420722        0.603514 2019-05-14 13:33:01    113.50     0.43  10000        5286     43.69
23       240000  1.731471  0.662456               0.018212       0.845740           0.348205           -1.714490        0.423239        0.604634 2019-05-14 15:26:57    113.57     0.45  10000        5283     45.59
24       250000  1.723561  0.663176               0.016556       0.846849           0.349553           -1.705427        0.425249        0.606550 2019-05-14 17:20:58    113.57     0.43  10000        5283     47.49
25       250000  1.723561  0.663176               0.016556       0.846849           0.349553           -1.705427        0.425249        0.606550 2019-05-14 19:14:58      0.10     0.45      0           0     47.50
```
